<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CppZmqZoltanExt: include/cppzmqzoltanext/actor.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">CppZmqZoltanExt<span id="projectnumber">&#160;0.0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('actor_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#typedef-members">Typedefs</a>  </div>
  <div class="headertitle"><div class="title">actor.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Actor pattern implementation using ZeroMQ PAIR sockets.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;chrono&gt;</code><br />
<code>#include &lt;functional&gt;</code><br />
<code>#include &lt;memory&gt;</code><br />
<code>#include &lt;mutex&gt;</code><br />
<code>#include &lt;zmq.hpp&gt;</code><br />
<code>#include &quot;cppzmqzoltanext/czze_export.h&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for actor.h:</div>
<div class="dyncontent">
<div class="center"><img src="actor_8h__incl.png" border="0" usemap="#ainclude_2cppzmqzoltanext_2actor_8h" alt=""/></div>
<map name="ainclude_2cppzmqzoltanext_2actor_8h" id="ainclude_2cppzmqzoltanext_2actor_8h">
<area shape="rect" title="Actor pattern implementation using ZeroMQ PAIR sockets." alt="" coords="201,5,386,45"/>
<area shape="rect" title=" " alt="" coords="5,101,72,126"/>
<area shape="rect" title=" " alt="" coords="97,101,183,126"/>
<area shape="rect" title=" " alt="" coords="208,101,285,126"/>
<area shape="rect" title=" " alt="" coords="309,101,373,126"/>
<area shape="rect" title=" " alt="" coords="398,101,477,126"/>
<area shape="rect" title=" " alt="" coords="501,93,667,133"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="actor_8h__dep__incl.png" border="0" usemap="#ainclude_2cppzmqzoltanext_2actor_8hdep" alt=""/></div>
<map name="ainclude_2cppzmqzoltanext_2actor_8hdep" id="ainclude_2cppzmqzoltanext_2actor_8hdep">
<area shape="rect" title="Actor pattern implementation using ZeroMQ PAIR sockets." alt="" coords="5,5,191,45"/>
<area shape="rect" href="actor_8cpp.html" title="Actor pattern implementation using ZeroMQ PAIR sockets." alt="" coords="46,93,150,119"/>
</map>
</div>
</div>
<p><a href="actor_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzmqzext_1_1actor__t.html">zmqzext::actor_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Class that implements the Actor pattern using ZMQ PAIR sockets.  <a href="classzmqzext_1_1actor__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a4e46922a78c918ba8e014f9bd36ee7fb"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="actor_8h.html#a4e46922a78c918ba8e014f9bd36ee7fb">zmqzext::actor_fn_t</a> = std::function&lt; bool(zmq::socket_t &amp;)&gt;</td></tr>
<tr class="memdesc:a4e46922a78c918ba8e014f9bd36ee7fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Alias for a function type used to define actor behaviors.  <br /></td></tr>
<tr class="separator:a4e46922a78c918ba8e014f9bd36ee7fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Actor pattern implementation using ZeroMQ PAIR sockets. </p>
<p>This module provides the actor_t class, which implements the Actor pattern for concurrent programming. An actor is an independent execution unit (running in its own thread) that runs a user-defined function and communicates with the parent through ZeroMQ PAIR sockets.</p>
<p>Thread Safety</p>
<p>The actor_t class is NOT thread-safe for most operations. The design aims to avoid memory sharing between the parent and child threads, except for the child socket passed to the user function. The actor_t object and its parent socket should only be accessed from the thread that created the actor. The child socket is passed to the user function and runs in the actor thread. Additional parameters can be passed to the user function via captures in lambdas or functors, but the lifetime of passed parameters must be managed carefully. Usually, parameters should be copied or moved into the user function to avoid dangling references. Pointers where the ownership is transferred to the user function are also acceptable.</p>
<p>Initialization Synchronization</p>
<p>The start() method blocks until the user function sends either a success or failure signal. This ensures initialization of the actor is synchronized with the calling thread.</p>
<p>Exception Handling</p>
<p>If an exception is thrown in the user function (other than zmq::error_t) before sending the success signal, it will be captured and re-thrown in the start() method, allowing the parent to handle initialization errors. After sending the success signal, its the user's responsibility to handle exceptions within the user function. Still, the actor_t class will catch unhandled exceptions and silently exit the thread to avoid crashing the application.</p>
<p>Finalization Synchronization</p>
<p>The user function finalization is requested by the stop() method which can be called explicitly or is implicitly by the destructor. The stop() method sends a stop request and waits for a response signal, with a configurable timeout. It is the user's responsibility to handle the stop request in the user function and exit immediately. Usually, the user function communicates to the parent application that it has finished its work (either by its own logic or by a previous request) and then the parent application destroys the actor, starting the stop synchronization.</p>
<p>Key features:</p><ul>
<li>Thread-safe concurrent execution with minimal synchronization</li>
<li>Isolated computational units that don't share memory</li>
<li>Message-based communication between parent and child threads</li>
<li>Exception handling and propagation from child to parent during initialization</li>
<li>Automatic cleanup and resource management</li>
</ul>
<dl class="section author"><dt>Authors</dt><dd>Luan Young (<a href="#" onclick="location.href='mai'+'lto:'+'lua'+'np'+'y@g'+'ma'+'il.'+'co'+'m'; return false;">luanp<span class="obfuscator">.nosp@m.</span>y@gm<span class="obfuscator">.nosp@m.</span>ail.c<span class="obfuscator">.nosp@m.</span>om</a>)</dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>2025 Luan Young</dd></dl>
<p>Distributed under the MIT License (MIT) (See accompanying file LICENSE or copy at <a href="http://opensource.org/licenses/MIT">http://opensource.org/licenses/MIT</a>) </p>

<p class="definition">Definition in file <a class="el" href="actor_8h_source.html">actor.h</a>.</p>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a id="a4e46922a78c918ba8e014f9bd36ee7fb" name="a4e46922a78c918ba8e014f9bd36ee7fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e46922a78c918ba8e014f9bd36ee7fb">&#9670;&#160;</a></span>actor_fn_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="actor_8h.html#a4e46922a78c918ba8e014f9bd36ee7fb">zmqzext::actor_fn_t</a> = typedef std::function&lt;bool(zmq::socket_t&amp;)&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Alias for a function type used to define actor behaviors. </p>
<p>This type represents a callable object (such as a lambda, function pointer, or functor) that takes a reference to a zmq::socket_t and returns a boolean value.</p>
<p>The actor should send a success signal through the provided socket as soon as it has completed its initialization successfully. If initialization fails, it may throw an exception, which will be rethrown in the parent thread, or just return false, which will throw a std::runtime_error in the parent thread.</p>
<p>After the actor sends the success signal, it should monitor for stop requests and return immediately when a stop request is received. The return value has no meaning after initialization.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">socket</td><td>Reference to a ZeroMQ socket used by the actor for communication. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true to finish with a success signal, false to finish with a failure signal. </dd></dl>

<p class="definition">Definition at line <a class="el" href="actor_8h_source.html#l00121">121</a> of file <a class="el" href="actor_8h_source.html">actor.h</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_f52eede6da6d051e0da60253b6144a60.html">cppzmqzoltanext</a></li><li class="navelem"><a class="el" href="actor_8h.html">actor.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6 </li>
  </ul>
</div>
</body>
</html>
